<!DOCTYPE HTML>
<html>
    <head>
    <title>Massively by HTML5 UP</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
</head>	<body class="is-preload">

        <div id="wrapper" class="fade-in">
            <header id="header">
                <a href="index.html" class="logo">Hannos Blog</a>
            </header>

            <nav id="nav">
    <ul class="links">
        <li><a href="../index.html">Blog</a></li>
        <li><a href="../archive.html">Archive</a></li>
        <li><a href="../aboutme.html">About me</a></li>
        <li class="active"><a href="../posts/2021-08-10-gradle-exec-vars.html">Terraform vars for gradle exec task</a></li>
    </ul>
</nav>

            <div id="main">
                <section class="post">
    <header class="major">
        <span class="date">2021-08-10</span>
        <h1>How to pass multiple vars to terraform command in gradle exec task</h1>
        <p>As if it was easy!</p>
    </header>
        <div class="image main"><img src="../images/Terraform_VerticalLogo_FullColor.png" alt="" /></div>
        <p><p>I can't believe I wasn't able to find a single example on the internet about how to use the <b>terraform</b> executable with <i>Java ProcessBuilder, Runtime.exec, Gradle's Exec task</i> or anything else. <b>How hard can it be</b> might be your question. The problem is that it's not to intuitive and easy how to pass args when not just directly typing everything by hand on the shell directly.<br><br>In my case, I needed to pass mutliple var options into a <i>terraform plan</i> command. On the command line, this may look like <br><blockquote>terraform plan -var foo=bar -var bar=baz -var-file=variables.prod.tfvars</blockquote><br> Or as described in <a href="https://www.terraform.io/docs/language/values/variables.html#variables-on-the-command-line">the official documentation</a>, it could be <br><br><blockquote>terraform apply -var="image_id=ami-abc123"</blockquote> or <br><br><blockquote>terraform apply -var='image_id_list=["ami-abc123","ami-def456"]' -var="instance_type=t2.micro"</blockquote><br> There is <a href="https://www.terraform.io/docs/cli/commands/plan.html#input-variables-on-the-command-line">even more documentation</a> in order to make this thing work across different operating systems.<br>What struck me was apparently the whitespace between <i>-var</i> and the key value pair itself. Took me round about an hour to figure out this is the correct way to feed a command into a Gradle Exec task (Kotlin DSL ahead):<br><br><iframe src="https://pl.kotl.in/-5SFERD8_" style="width: 550px;
    height: 250px;"></iframe><br><br>Mind that every var requires you to pass in an arg of <i>-var</i> and an arg of the key value pair itself.</p>
</p>
</section>
            </div>

            <footer id="footer">
    <section class="split contact">
        <section>
            <h3>Social</h3>
            <ul class="icons alt">
                <li><a href="https://twitter.com/hannomalie1" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
                <li><a href="https://github.com/hannomalie" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
                <li><a href="https://bitbucket.org/hannespernpeintner/" class="icon brands alt fa-bitbucket"><span class="label">GitHub</span></a></li>
            </ul>
        </section>
    </section>
</footer>

<div id="copyright">
    <ul>
        <li>&copy; 2021</li>
        <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
        <li><a href="https://jbake.org/">JBake</a></li>
    </ul>
</div>        </div>

        <script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/jquery.scrollex.min.js"></script>
<script src="../assets/js/jquery.scrolly.min.js"></script>
<script src="../assets/js/browser.min.js"></script>
<script src="../assets/js/breakpoints.min.js"></script>
<script src="../assets/js/util.js"></script>
<script src="../assets/js/main.js"></script>
	</body>
</html>